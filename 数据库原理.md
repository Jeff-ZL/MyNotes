# 数据库系统原理

*Author: ZhaoLulu@BJTU*

*Teacher: LiuZhen@BJTU*

*Date: 2021.9.8*

## 第0章 课程介绍

### 0.1 什么是数据库

1. A Database is a collection of data that conforms with a data model.
2. Database models a real-world "enterprise" which includes entities and relationships.

### 0.2 为什么学习数据库

1. 数据库处于计算机科学的核心地位。
2. 数据库对社会各行各业都十分重要。
3. 数据库包含的知识丰富。
4. 数据库已成为信息工程的基础骨干。

### 0.3 谁使用数据库

- 行业用户
- DBMS产品提供商、开发人员
- 数据库应用开发者
- 数据库管理员DBAs

### 0.4 数据库的发展历程

1. 三代演变：层/网状模型、关系模型、新一代数据库系统家族。
2. 数据库领域有4位图灵奖得主。
3. 发展出一门计算机基础学科——数据建模和DSMS核心技术为主。
4. 带动了一门巨大的软件产业——DBMS及其相关工具产品、应用套件、解决方案。

### 0.5 如何学习数据库

- 需求驱动理论
- 理论指导实践
- 实践验证理论
- 实践发现需求

### 0.6 课程考核方式

总评成绩 = 平时成绩50分 + 期末考试50分

平时成绩 = 场景实例开发实验作业#1~#7 + 课设 + 习题

## 第1章 绪论

本章的主要内容如下：

<img src="figures/sjk1-1.png" alt="sjk1-1" style="zoom:50%;" />

### 1.1 数据库系统概述

#### 1.1.1 数据库的地位

- 数据库技术产生于上世纪六十年代末，是数据管理的最新技术，是计算机科学的重要分支。
- 数据库技术是信息系统的核心和基础，它的出现极大地促进了计算机应用向各行各业的渗透。
- 数据库的建设规模、数据库信息量的大小和使用频度已经成为衡量一个国家信息化程度的重要标志。

#### 1.1.2 四个基本概念

- 数据Data
  - 定义：描述事物的符号记录。
  - 种类：文字、图形、图像、声音。
  - 特点：数据与其语义不可分割，数据的形式不能完全表达其内容。
  - 举例：（李明，男，1998，江苏，计算机系，2016）
  - 语义：学生姓名、性别、出生年份、籍贯、所在系别、入学时间
  - 解释：李明是个大学生，1998年出生，江苏人，2016年考入计算机系。
- 数据库Database (DB)
  - 定义：数据库是长期存放在计算机内、有组织的、可共享的数据集合。
  - 特点：数据库中的数据按一定的数据模型组织、描述和存储，且具有较小的冗余度、较高的数据独立性和易扩展性，可为多个用户共享。
- 数据库管理系统Database-management System (DBMS)
  - 定义：数据库管理系统是用于建立（如何定义、组织和存储数据）、使用（查询、插入、删除和修改数据）和维护（保证数据的安全性、完整性）数据库的软件。
  - 功能：数据库的建立；数据定义；数据组织、存储和管理；数据操纵；数据库事务和和运行管理；数据库维护。
  - 位置：位于用户和操作系统之间。
- 数据库系统Database System (DBS)
  - 定义：数据库系统是指在计算机系统中引入数据库之后的系统构成。
  - 构成：DB、DBMS及其开发工具、应用系统、数据库管理员和用户。
- 四者的关系

<img src="figures/sjk1-2.png" alt="sjk1-2" style="zoom:50%;" />

#### 1.1.3 数据库管理技术的产生和发展

- 数据处理：是指对各种形式的数据进行收集、储存、加工、管理和传播的一系列活动的总和。

- 数据管理：是指数据的分类、组织、编码、存储、维护、检索等操作，是数据处理的核心。

- 数据管理技术的发展动力：

  - 应用需求的推动
  - 计算机硬件的发展
  - 计算机软件的发展

- 数据管理技术的发展过程：

  |                  | 人工管理阶段（40年代中~50年代中）                            | 文件系统阶段（50年代末~60年代中）                            | 数据库系统阶段（60年代末~至今）                              |
  | ---------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
  | 应用需求         | 科学计算                                                     | 科学计算、管理                                               | 大规模管理                                                   |
  | 硬件             | 只有磁带、卡片和纸带                                         | 磁盘、磁鼓等直接存取存储设备                                 | 大容量磁盘、磁鼓等直接存取存储设备                           |
  | 软件             | 只有汇编语言，无数据管理方面的软件，无操作系统               | 出现了高级语言和操作系统，OS中文件系统是专门管理外存的数据管理软件 | 有数据库管理系统                                             |
  | 数据处理         | 批处理                                                       | 批处理、联机实时处理                                         | 联机实时处理、分布处理、批处理                               |
  | 特点             | 数据不长期保存；应用程序管理数据；数据不具有独立性；数据不共享 | 数据可长期保存；由文件系统管理数据；数据共享性差，冗余度大；数据独立性差 | 数据结构化；数据共享性高，冗余度低，易扩充；数据独立性高；数据有DBMS统一管理和控制 |
  | 与应用程序的关系 | <img src="figures/sjk1-3.png" alt="sjk1-3" style="zoom:50%;" /> | <img src="figures/sjk1-4.png" alt="sjk1-4" style="zoom:50%;" /> | <img src="figures/sjk1-5.png" alt="sjk1-5" style="zoom:50%;" /> |

- 20世纪60年代末的三件大事

  - 1968年——IMS系统（层次模型）
    - IBM和Rockwell联合开发以满足阿波罗计划。
  - 1969年——DBTG报告（网状结构）
    - 美数据系统语言写会CODASYL发表的标准规范。
  - 1970年——IBM公司E.F.Codd的文章（关系模型）
    - 奠定关系数据库的理论基础。
    - 关系数据库成为主流：DB2, Oracle, SQL Server。

- 数据库系统和文件系统的根本区别

  - 在文件系统中，记录内部有了某些结构，但记录之间没有联系。数据库系统实现整体数据结构化（整体是结构化的，数据之间是具有联系的）。
  - 在文件系统中，数据的最小存取单位是记录，粒度不能细化到数据项。数据库系统中可以存取数据库中某一个数据项、一组数据项、一个记录、一组记录。

### 1.2 数据模型

- 模型是现实世界特征的模拟和抽象。
- 数据模型也是一种模型，是现实世界数据特征的抽象。
- A data model is an abstract model that organizes elements of data and standardizes how they relate to one another and to properties of the real world entites.
- 数据模型用于抽象、表示和处理现实世界中的数据和信息。
- 数据模型应满足三方面要求：
  - 能比较真实地模拟现实世界。
  - 容易为人所理解。
  - 便于在计算机上实现。
- 数据模型相关的三个世界：现实世界、信息世界、机器世界。

<img src="figures/sjk1-6.png" alt="sjk1-6" style="zoom:50%;" />

- 数据模型的设计有三个阶段：概念模型、逻辑模型、物理模型。其中概念模型和逻辑模型需要我们去设计，物理模型交由DBMS生成。

#### 1.2.1 概念模型

- 概念模型的功能
  - 在信息世界里对现实世界进行建模。
  - 表达现实世界中的概念。
  - 表达概念之间的关系。
  - 表达业务领域的语义知识。
- 概念模型的要求
  - 具有很强的表达能力。
  - 易于理解。
  - 简单。
- 概念模型的定义

为正确直观地反映客观事物及其联系，对所研究的信息世界，按用户观点对数据和信息建模，称之为概念模型（用于数据库设计）。**概念模型的建立对于理解用户需求十分重要，并且在实际工作生产中没有想象的那么容易，需要与客户进行有效的需求沟通。**

- 概念模型的特点
  - 是独立于计算机系统的模型，完全不涉及信息在系统中的表示。
  - 用于建立信息世界的数据模型，是现实世界的第一层抽象（实现到机器世界的中间层）。
  - **强调语义表达功能，概念简单、清晰，易于用户理解，是用户和DB设计人员之间交流的语言，是DB设计人员进行数据库设计的工具。**
- 概念模型的基本概念
  - 实体 (Entity)
  - 实体集 (Entity Set)
  - 实体标识符 (Key)
  - 属性 (Attribute)
  - 域 (Domain)
  - 实体型 (Entity Type)
  - 联系 (Relationship)
    - 1:1 一对一联系
    - 1:n 一对多联系
    - m:n 多对多联系

<img src="figures/sjk1-7.png" alt="sjk1-7" style="zoom:50%;" />

- 概念模型的表示——实体-联系模型（E-R模型）

<img src="figures/sjk1-8.png" alt="sjk1-8" style="zoom:50%;" />

缺陷在于：E-R模型是一种静态信息模型，只能反映当前状态，不能反映实体的变化过程。

#### 1.2.2 数据模型的组成要素

1. 数据结构：是所研究对象类型的集合，即对实体类型和实体间联系的表达和实现，是系统静态特征的描述。
2. 数据操作：是指对数据库中各对象允许执行的操作的集合，包括检索和更新两类，是系统动态特征的描述。
3. 数据完整性约束：给出数据及其联系应具有的制约和依存规则，保证数据的正确、有效、相容。有实体完整性、参照完整性和用户定义的完整性。

#### 1.2.3 逻辑模型

- A logical data model or logical schema is a data model of a specific problem domain expressed independent of a particular database management product or storage technology (physical data model) but in terms of data structures such as relational tables and columns, object-oriented classes, or XML tags.
- This is as opposed to a conceptual data model, which describes the semantics of an organization without reference to technology.
- 概念模型表达语义无关实现技术；逻辑模型关系实现技术无关物理平台。
- 层次模型 (Hierarchical Model)
  - 数据结构：按照树形结构组织数据，以记录类型为结点，以结点间联系为边的有序树或森林。有且只有一个结点没有双亲结点（即根结点），根以外的其他结点有且只有一个双亲结点。适合于表示一对多关系，表示多对多关系可以用冗余结点法或虚拟结点法。
  - 数据操纵：
    - 查询
    - 插入：如果没有相应的双亲结点，不能插入子结点。
    - 删除：如果删除双亲结点，则相应的子女结点也被同时删除。
    - 更新：应修改所有相应的记录，以保证数据的一致性。
  - 存储结构：
    - 邻接法：按照层次树前序遍历邻接存放，即物理空间相连。
    - 链接法：用指引元来反映数据之间的层次联系，如孩子兄弟链接法、层次序列链接法。
  - 优缺点：
    - 优点：层次数据模型简单，对具有一对多的层次关系描述自然；直观且容易理解；记录之间联系通过指针实现，查询效率高；层次数据模型提供了良好的完整性支持。
    - 缺点：多对多联系表示存在数据冗余；结构严格复杂编程困难；对插入和删除数据操作限制多；查询子女必须通过双亲结点。
  - 典型的层次数据库系统：1986年IBM公司IMS数据库管理系统
- 网状结构 (Network Model)
  - 数据结构：用有向图表示实体及实体间联系，以记录类型为结点，结点间联系为边（适合多对多关系）。允许一个以上的结点无双亲结点，一个结点可以有多于一个双亲结点。1973年图灵奖获得者C.W.Bachman于1964年主持与开发了最早的网状数据库系统IDS。1972年推出的DBTG报告首次确定的数据库的**三层体系结构**，是数据库历史上的里程碑。
  - 数据操纵：
    - 查询
    - 插入：允许插入尚未确定双亲结点值的子女结点
    - 删除：允许只删除双亲结点值
    - 更新
  - 存储结构：单向链接、双向链接、环装链接、向首链接。
  - 优缺点：
    - 优点：在两个结点之间可以有两种或多种联系；记录之间的联系通过指针实现，m:n联系也容易实现，存取（查询）效率较高。
    - 缺点：结构比较复杂，而且随着应用环境的扩大，数据库的结构就变的越来越复杂，不利于用户掌握；编程复杂。
  - 典型的网状结构数据库系统：IDMS、DMS1100、IDS/2、IMAGE。
- 关系模型 (Relationship Model)
